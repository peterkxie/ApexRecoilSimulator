<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apex Recoil Simulator</title>
</head>
<body>

<!-- Recoil patterns -->
<script>
    let patterns = {
        "R-301": [
            [0, 10],
            [3, 5]
        ]
    }
</script>

<canvas id="myCanvas" width="400" height="500" style="border: 1px solid black;"></canvas>

<script>
    let canvasElement = document.getElementById("myCanvas");
    let context = canvasElement.getContext("2d");

    function getCanvas() {
        return canvasElement;
    }

    let coordinate = [0, 0];
    drawDot(htoc(coordinate[0], coordinate[1]));
    patterns["R-301"].forEach(value => {
        coordinate[0] = coordinate[0] + value[0];
        coordinate[1] = coordinate[1] + value[1];
        drawDot(htoc(coordinate[0], coordinate[1]))
    });

    function drawDot(coordinate) {
        context.fillRect(coordinate[0], coordinate[1], 3, 3);
    }

    // Convert human coordinate to canvas coordinate
    // Coordinate system is x axis along the bottom, y axis in the middle
    // htoc = human to canvas
    function htoc(x, y) {
        return [
            x + getCanvas().width / 2,
            getCanvas().height - y - 40
        ];
    }
    function ctoh(x, y) {
        return [
            x - getCanvas().width / 2,
            getCanvas().height - y - 40
        ];
    }

    getCanvas().addEventListener("mousedown", event => {
        let rect = getCanvas().getBoundingClientRect();
        let x = event.clientX - rect.left;
        let y = event.clientY - rect.top;
    });
</script>

</body>
</html>